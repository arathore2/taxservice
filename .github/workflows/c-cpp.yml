name: C/C++ CI

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:
  build:

    runs-on: macos-latest

    steps:
    - name: Setup SSH Keys and known_hosts
      env:
          SSH_AUTH_SOCK: /tmp/ssh_agent.sock
      run: 
          ssh-agent -a $SSH_AUTH_SOCK > /dev/null
          ssh-add - <<<'${{secrets.BITBUCKETPRIVATEKEY}}'
    - name: checkout Repo
      env:
           SSH_AUTH_SOCK: /tmp/ssh_agent.sock
      run: git clone git@bitbucket.org:energyconservatory/tecconfig.git

